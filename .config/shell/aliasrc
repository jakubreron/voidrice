#!/bin/sh

##
## Stolen
##

# Use neovim for vim if present.
[ -x "$(command -v nvim)" ] && alias vim="nvim" vimdiff="nvim -d"

# Use $XINITRC variable if file exists.
[ -f "$XINITRC" ] && alias startx="startx $XINITRC"

# sudo not required for some system commands
for command in mount umount sv pacman updatedb su shutdown poweroff reboot ; do
	alias $command="sudo $command"
done; unset command

# Verbosity and settings that you pretty much just always are going to want.
alias \
	cp="cp -iv" \
	mv="mv -iv" \
	bc="bc -ql" \
  df="df -h" \
  free='free -m' \
	mkd="mkdir -pv" \
	yt="youtube-dl --add-metadata -i" \
	yta="yt -x -f bestaudio/best" \
	ffmpeg="ffmpeg -hide_banner"

# Colorize commands when possible.
alias \
	ls="exa -F --time-style=iso --icons --group-directories-first --git" \
  ll="ls -la" \
	grep="grep --color=auto" \
	diff="diff --color=auto" \
  t="ls -T"

# These common commands are just too long! Abbreviate them.
alias \
	ka="killall" \
	sdn="shutdown -h now" \
	e="sudoedit" \
	v="$EDITOR" \
	p="paru" \
  pkgs="pkgstats search" \
  ud="updatedb"

# Generate packages
alias \
  pkg-main="cap; pkggen main.txt && cd -" \
  pkg-work="cap; pkggen work.txt && cd -" \
  pkg-secondary="cap; pkggen secondary.txt && cd -" \
  pkg-yarn="cap; ygli | awk '/info/{print $2}' | sed -e 's/\"//g' > yarn.txt && cd -" 

# Git
alias \
	g="git" \
  dv="git checkout develop && git pull" \
  ms="git checkout master && git pull" \
  es="git checkout env/staging && git pull" \
  mn="git checkout main && git pull"

alias \
  sctl="sudo systemctl" \
	ref="shortcuts >/dev/null; source ${XDG_CONFIG_HOME:-$HOME/.config}/shell/shortcutrc ; source ${XDG_CONFIG_HOME:-$HOME/.config}/shell/zshnameddirrc" \
	wth="less -S ${XDG_DATA_HOME:-$HOME/.local/share}/weatherreport" \
  rates="curl rate.sx | less -S"

# get fastest mirrors
alias \
  mirror="sudo reflector -f 30 -l 30 --number 10 --verbose --save /etc/pacman.d/mirrorlist" \
  mirrord="sudo reflector --latest 50 --number 20 --sort delay --save /etc/pacman.d/mirrorlist" \
  mirrors="sudo reflector --latest 50 --number 20 --sort score --save /etc/pacman.d/mirrorlist" \
  mirrora="sudo reflector --latest 50 --number 20 --sort age --save /etc/pacman.d/mirrorlist"

# For when keys break
alias fix-pkg-keys="sudo pacman-key --init && sudo pacman-key --populate archlinux && sudo pacman-key --refresh-keys"

# get top process eating memory
# get top process eating cpu ##
alias \
  psmem='ps auxf | sort -nr -k 4 | head -5' \
  pscpu='ps auxf | sort -nr -k 3 | head -5'

# yarn
alias \
  y="yarn" \
  yi="yarn init -y"
# add & remove
alias \
  ya="yarn add" \
  yad="yarn add -D" \
  yr="yarn remove"
# global
alias \
  yg="yarn global" \
  ygli="yarn global list --depth=0" \
  yga="yarn global add" \
  ygr="yarn global remove"
# dev
alias \
  yd="yarn dev" \
  ydw="yarn dev --watch" \
  yst="yarn start" \
  ystw="yarn start --watch" \
  ysr="yarn serve" \
  ysrw="yarn serve --watch" \
  yp="yarn prod" \
  yb="yarn build" 
# lints
alias \
  yl="yarn lint" \
  ylf="yarn lint:fix" \
  yts="yarn test" \
  ytsd="yarn test:dev" 
# storybook
alias \
  ysb="yarn storybook" \
  ysbb="yarn storybook:build"
# misc
alias \
  yo="yarn outdated" \
  ycc="yarn cache clean" \
  yli="yarn list --depth=0" \
  yf="yarn info --verbose --no-emoji" \
  yua="yarn-upgrade-all"

# php
alias \
  paws="sudo php artisan websockets:serve --host=0.0.0.0 --port=444" \
  pawd="php artisan workspace:dump"

# composer
alias \
  cs="composer" \
  csi="composer install" \
  csr="composer refresh" \
  csb="composer rebuild" \
  csd="composer deploy" \
  csa="csi; csr; csb; csd;"

# valet
alias \
  va="valet" \
  vas="valet secure" \
  vau="valet unsecure" \
  var="valet restart" \
  vad="valet domain" \
  val="valet link" \
  vaf="valet forget" \
  vau="valet use" \
  vast="valet status"

# youtube
alias \
  ytd="yt -x -f bestaudio/best --download-archive playlist.txt" \
  ytdg="Mg; yt -x -f bestaudio/best --download-archive playlist.txt 'https://www.youtube.com/playlist?list=PLqQefq-YNypMfVRJJSW10MRaFYARFiL_P'" \
  ytdl="Ml; yt -x -f bestaudio/best --download-archive playlist.txt 'https://www.youtube.com/playlist?list=PLqQefq-YNypOJjVTvYXW-8ftq2GpnxXVV'" \
  ytdo="Mo; yt -x -f bestaudio/best --download-archive playlist.txt 'https://www.youtube.com/playlist?list=PLqQefq-YNypOhI67WpGJVJyXyBem_VOYZ'" \
  ytda="Ma; yt -x -f bestaudio/best --download-archive playlist.txt 'https://www.youtube.com/playlist?list=PLqQefq-YNypNxKSWAsR7VQxEY63RK7AwD'" \
  ytdall="ytdg; ytdl; ytdo; ytda" \
  rkrl="curl -s -L https://raw.githubusercontent.com/keroserene/rickrollrc/master/roll.sh | bash"

# sync
alias \
  replace-all="
  rm ~/{.zprofile,.xprofile} &&
    rm -rf ~/.config/{dunst,fontconfig,gtk-3.0,gtk-2.0,lf,mpd,mpv,ncmpcpp,newsboat,nvim,pulse,shell,sxiv,wal,wget,x11,zathura,zsh,neofetch} &&
    rm ~/.config/{mimeapps.list,user-dirs.dirs} &&
    rm -rf ~/.local/share/{applications,larbs} &&
    rm -rf ~/.local/bin/{cron,statusbar} &&
    rm ~/.local/bin/* | echo 'y' &&
    cd ~/.config/personal && stow --adopt --target=/home/jakub arch voidrice universal &&
    rm -rf ~/.local/bin/{cron,statusbar} &&
    mkdir ~/.local/bin/{statusbar,cron} &&
    ln -n ~/.config/personal/voidrice/.local/bin/statusbar/* ~/.local/bin/statusbar/ &&
    ln -n ~/.config/personal/voidrice/.local/bin/cron/* ~/.local/bin/cron/
      " \
        sy="cap; cat yarn.txt | xargs -t yarn global add" \
        sp="cap; p -S --needed - < main.txt" \
        ssrc="sdw && g pl && cmpl; sdb && g pl && cmpl; sdm && g pl && cmpl; sst && g pl && cmpl" \
        sdots="ca && g pl; cu && g pl; cv && g pl; replace-all" \
        slvim="cd ~/.local/share/lunarvim/lvim && git pull && lvim +LvimCacheReset +PackerUpdate" \
        snc="ssrc; sdots; slvim" \
        sproj="pzw && g pl; pza && g pl; pzl && g pl; pp && g pl" \
        sall="snc; sproj"

# some programs
alias \
  n="nautilus" \
  rs="redis-server" \
  lzg="lazygit" \
  lzd="lazydocker" \
  ee="easyeffects --gapplication-service" \
  clp="colorpicker --short --one-shot --preview | xsel -b" \
  sck="killall screenkey || screenkey &"

# network
alias \
  myip="curl ifconfig.co" \
  ports="netstat -ntlup" \
  restart-hosts="/bin/systemctl restart systemd-hostnamed" 

# dynamic folders
alias \
  ff="cd $HOME/.mozilla/firefox/*.dev-edition-default" \
  ffc="cd $HOME/.mozilla/firefox/*.dev-edition-default/chrome" 

# misc
alias \
  gcl="dmenu-github" \
  cmpl="sudo make && sudo make install" \
  ggl="tuxi" \
  update-grub="sudo grub-mkconfig -o /boot/grub/grub.cfg" \
  encrypt="gpg -c --no-symkey-cache --cipher-algo AES256" 

