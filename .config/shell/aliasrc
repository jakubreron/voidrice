#!/bin/sh

##
## Stolen
##

# Use neovim for vim if present.
[ -x "$(command -v nvim)" ] && alias vim="nvim" vimdiff="nvim -d"

# Use $XINITRC variable if file exists.
[ -f "$XINITRC" ] && alias startx="startx $XINITRC"

# sudo not required for some system commands
for command in mount umount sv pacman updatedb su shutdown poweroff reboot ; do
	alias $command="sudo $command"
done; unset command

# Verbosity and settings that you pretty much just always are going to want.
# df="df -h" \
alias \
  cp="cp -iv" \
  mv="mv -iv" \
  bc="bc -ql" \
  df="duf" \
  du="dust" \
  free='free -m' \
  mkd="mkdir -pv" \
  ffmpeg="ffmpeg -hide_banner"

# Colorize commands when possible.
alias \
  ls="exa -F --time-style=iso --icons --group-directories-first --git" \
  ll="ls -la" \
  grep="grep --color=auto" \
  diff="diff --color=auto" \
  t="ls -T"

# These common commands are just too long! Abbreviate them.
alias \
  ka="killall" \
  sdn="shutdown -h now" \
  e="sudoedit" \
  v="$EDITOR" \
  p="paru" \
  pkgs="pkgstats search" \
  ud="updatedb"

# Generate packages
alias \
  pkg-main="Cpap; pkggen main.txt && cd -" \
  pkg-work="Cpap; pkggen work.txt && cd -" \
  pkg-secondary="Cpap; pkggen secondary.txt && cd -" \
  pkg-yarn="Cpap; ygll | awk '/info/{print $2}' | sed -e 's/\"//g' > yarn.txt && cd -"

# Git
alias \
  g="git" \

alias \
  ssctl="sudo systemctl" \
  sctl="systemctl" \
  sctlu="systemctl --user" \
  ref="shortcuts >/dev/null; source ${XDG_CONFIG_HOME:-$HOME/.config}/shell/shortcutrc ; source ${XDG_CONFIG_HOME:-$HOME/.config}/shell/zshnameddirrc" \
  wth="less -S ${XDG_DATA_HOME:-$HOME/.local/share}/weatherreport" \
  rates="curl rate.sx | less -S"

# get fastest mirrors
alias \
  mirror="sudo reflector -f 30 -l 30 --number 10 --verbose --save /etc/pacman.d/mirrorlist" \
  mirrord="sudo reflector --latest 50 --number 20 --sort delay --save /etc/pacman.d/mirrorlist" \
  mirrors="sudo reflector --latest 50 --number 20 --sort score --save /etc/pacman.d/mirrorlist" \
  mirrora="sudo reflector --latest 50 --number 20 --sort age --save /etc/pacman.d/mirrorlist"

# For when keys break
alias fix-pkg-keys="sudo pacman-key --init && sudo pacman-key --populate archlinux && sudo pacman-key --refresh-keys"

# get top process eating memory
# get top process eating cpu ##
alias \
  psmem='ps auxf | sort -nr -k 4 | head -5' \
  pscpu='ps auxf | sort -nr -k 3 | head -5'

# yarn
alias \
  y="yarn" \
  yi="yarn init -y"
# add & remove
alias \
  ya="yarn add" \
  yad="yarn add -D" \
  yr="yarn remove"
# global
alias \
  ygl="yarn global" \
  ygll="yarn global list --depth=0" \
  yga="yarn global add" \
  ygr="yarn global remove"
# tests
alias \
  yts="yarn test" \
  ytsu="yarn test:unit" \
# dev
alias \
  ydv="yarn dev" \
  ydvw="yarn dev --watch" \
  ywt="yarn watch" \
  yst="yarn start" \
  ystw="yarn start --watch" \
  ysr="yarn serve" \
  ysrw="yarn serve --watch" \
  yp="yarn prod" \
  ypr="yarn production" \
  yb="yarn build"
# lints
alias \
  yln="yarn lint" \
  ylnf="yarn lint:fix" \
# storybook
alias \
  ysb="yarn storybook" \
  ysbb="yarn storybook:build"
# misc
alias \
  yod="yarn outdated" \
  ycc="yarn cache clean" \
  yli="yarn list --depth=0" \
  yif="yarn info --verbose --no-emoji" \
  yua="yarn-upgrade-all" \
  ycv="yarn create vite"

# php
alias \
  paws="sudo php artisan websockets:serve --host=0.0.0.0 --port=444" \
  padw="php artisan deploy:workspaces" \
  pawd="php artisan workspace:dump" \
  pacc="php artisan cache:clear"

# composer
alias \
  cs="composer" \
  csi="composer install" \
  csr="composer refresh" \
  csb="composer rebuild" \
  csd="composer deploy" \
  csa="csi; csr; csb; csd;"

# valet
alias \
  va="valet" \
  vas="valet secure" \
  vau="valet unsecure" \
  var="valet restart" \
  vad="valet domain" \
  val="valet link" \
  vaf="valet forget" \
  vau="valet use" \
  vast="valet status"

# youtube
# NOTE: i = ignore errors
# NOTE: x = extract, -f = format
alias \
  yt="yt-dlp --add-metadata -i --cookies-from-browser chrome" \
  yta="yt -x -f bestaudio/best --download-archive playlist.txt" \
  ytap="cat playlist.txt | sed -e 's/youtube /https:\/\/www.youtube.com\/watch?v=/g' | xargs -t yt-dlp --add-metadata -i --cookies-from-browser chrome -x -f bestaudio/best"
alias \
  yta-general="cd ~/Music/general; yta  'https://www.youtube.com/playlist?list=PLqQefq-YNypMfVRJJSW10MRaFYARFiL_P'" \
  yta-live="cd ~/Music/live; yta 'https://www.youtube.com/playlist?list=PLqQefq-YNypOJjVTvYXW-8ftq2GpnxXVV'" \
  yta-osts="cd ~/Music/osts; yta 'https://www.youtube.com/playlist?list=PLqQefq-YNypOhI67WpGJVJyXyBem_VOYZ'" \
  yta-albums="cd ~/Music/albums; yta 'https://www.youtube.com/playlist?list=PLqQefq-YNypNxKSWAsR7VQxEY63RK7AwD'" \
  yta-touhou="cd ~/Music/touhou; ytap" \
  yta-akatsuki-records="cd ~/Music/akatsuki-records; ytap" \
  yta-main="yta-general; yta-live; yta-osts; yta-albums" \
  yta-all="yta-general; yta-live; yta-osts; yta-albums; yta-touhou; yta-akatsuki-records"

# sync replace every config file
alias \
  replace-all="
      rm ~/{.zprofile,.xprofile} &&
      rm -rf ~/.config/{dunst,fontconfig,gtk-4.0,gtk-3.0,gtk-2.0,lf,mpd,mpv,ncmpcpp,newsboat,nvim,pulse,shell,sxiv,wal,wget,x11,zathura,zsh,neofetch,pinentry,pipewire} &&
      rm ~/.config/{mimeapps.list,user-dirs.dirs} &&
      rm -rf ~/.local/share/{applications,larbs} &&
      rm -rf ~/.local/bin/{cron,statusbar,git} &&
      rm ~/.local/bin/* | echo 'y' &&
      cd ~/.config/personal &&
      stow --adopt --target=/home/jakub arch voidrice universal &&
      rm -rf ~/.local/bin/{cron,statusbar,git} &&
      mkdir ~/.local/bin/{statusbar,cron,git} &&
      ln -n ~/.config/personal/voidrice/.local/bin/statusbar/* ~/.local/bin/statusbar/ &&
      ln -n ~/.config/personal/voidrice/.local/bin/cron/* ~/.local/bin/cron/
      ln -n ~/.config/personal/voidrice/.local/bin/git/* ~/.local/bin/git/
    " \

# sync packages
alias \
    sp="Cpap; paru -S --needed - < main.txt" \
    sy="Cpap; cat yarn.txt | xargs -t yarn global add" \

# sync config files
alias \
    sync-src="Lsrdw && cmpl; Lsrdb && cmpl; Lsrdm && cmpl; Lsrst && cmpl; Lsrsx && cmpl" \
    sync-lvim="lvim +LuaCacheClear +LvimCacheReset +LvimUpdate +PackerSync +PackerCompile" \
    sync-all="git-sync-local-repos; replace-all; sync-src; sync-lvim" \
    sync-lvim-only="Lshlv; git pull && sync-lvim" \

# some programs
alias \
  nf="neofetch" \
  rs="redis-server" \
  lzg="lazygit" \
  lzd="lazydocker" \
  clp="colorpicker --short --one-shot --preview | xsel -b" \

# restart
alias \
  restart-ee="ka easyeffects; nohup easyeffects --gapplication-service &; rm nohup.out; notify-send 'EasyEffects activated'" \
  restart-dunst="ka dunst; nohup dunst &; rm nohup.out; notify-send 'Dunst activated'" \
  restart-picom="ka picom; nohup picom --experimental-backend &; rm nohup.out; notify-send 'Compositor activated'"

# network
alias \
  myip="curl ifconfig.co" \
  ports="netstat -ntlup" \
  restart-hosts="/bin/systemctl restart systemd-hostnamed"

# dynamic folders
alias \
  ff="cd $HOME/.mozilla/firefox/*.dev-edition-default" \
  ffc="cd $HOME/.mozilla/firefox/*.dev-edition-default/chrome"

# reinstall
alias \
  reinstall-lvim="
  bash <(curl -s https://raw.githubusercontent.com/lunarvim/lunarvim/master/utils/installer/uninstall.sh) &&
    bash <(curl -s https://raw.githubusercontent.com/lunarvim/lunarvim/master/utils/installer/install.sh) &&
    replace-all &&
    Cpv; git restore .config/lvim/config.lua &&
  " \

# misc
alias \
  ndi="nodemon index.js" \
  gcl="dmenu-github" \
  cmpl="sudo make && sudo make install" \
  encrypt="gpg -c --no-symkey-cache --cipher-algo AES256" \
  update-grub="sudo grub-mkconfig -o /boot/grub/grub.cfg" \
  init-ctags="ctags -R --exclude=.git" \
  rkrl="curl -s -L https://raw.githubusercontent.com/keroserene/rickrollrc/master/roll.sh | bash"
