source=./theme.conf

monitor=LVDS-1,1920x1080,0x0,1
monitor=DP-2,1920x1080@60,1920x0,1

exec-once = hyprpaper
exec-once = gammastep
exec-once = darkman run
exec-once = /usr/lib/polkit-kde-authentication-agent-1 
exec-once = waybar-daemon
exec-once = $NOTIFICATION_DAEMON
exec-once = $EQUALIZER_DAEMON
# exec-once = $LAST_USED_AUDIO_STATE_DAEMON

exec-once = $INPUT_METHOD
exec-once = keyd-application-mapper -d 

exec-once = wl-paste --type text --watch cliphist store #Stores only text data
exec-once = wl-paste --type image --watch cliphist store #Stores only image data

exec-once = $TORRENTS_DAEMON
exec-once = $PHONE_INTEGRATION_DAEMON
exec-once = git-sync-repos global
exec-once = entr-watch

general {
    gaps_in = 3
    gaps_out = 3
    border_size = 2

    layout = master
    cursor_inactive_timeout = 3
}

input {
    kb_layout = pl
    follow_mouse = 1

    touchpad {
        natural_scroll = true
        scroll_factor = 0.4
    }

    repeat_rate = 50
    repeat_delay = 250
}

decoration {
    rounding = 4

    shadow_range = 10
    shadow_offset = 1 2

    # inactive_opacity = 0.96

    blur {
      enabled = false
      new_optimizations = true
      xray = true
      ignore_opacity = true
    }

    blurls=waybar
    # blurls=rofi
}

animations {
  enabled = yes

  bezier = wind, 0.05, 0.9, 0.1, 1.05
  bezier = winIn, 0.1, 1.1, 0.1, 1.1
  bezier = winOut, 0.3, -0.3, 0, 1
  bezier = liner, 1, 1, 1, 1
  animation = windows, 1, 6, wind, slide
  animation = windowsIn, 1, 6, winIn, slide
  animation = windowsOut, 1, 5, winOut, slide
  animation = windowsMove, 1, 5, wind, slide
  animation = border, 1, 1, liner
  animation = borderangle, 1, 30, liner, loop
  animation = fade, 1, 10, default
  animation = workspaces, 1, 5, wind

    # bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    # animation = windows,     1, 6, myBezier
    # animation = windowsOut,  1, 6, default, popin 80%
    # animation = border,      1, 8, default
    # animation = borderangle, 1, 6, default
    # animation = fade,        1, 6, default
    # animation = workspaces,  1, 6, default
    # # smooth window drag
    # animation = windowsIn,   1, 4, myBezier, popin 50%
    # animation = windowsMove, 1, 4, default
}

dwindle {
    pseudotile = true # master switch for pseudotiling. Enabling is bound to MODKEY + P in the keybinds section below
    preserve_split = true # you probably want this
}

master {
    # no_gaps_when_only = true
    always_center_master = true
}

misc {
  # force_hypr_chan = true
  disable_hyprland_logo = true
  disable_splash_rendering = true
  enable_swallow = true
  disable_autoreload = true
  mouse_move_enables_dpms = true
  key_press_enables_dpms = true
  swallow_regex = ^(Alacritty)$
}

device:lenovo-trackpoint-keyboard-ii-1 {
    sensitivity = -0.5
}
device:lenovo-trackpoint-keyboard-ii-2 {
    sensitivity = -0.5
}
device:tpps//1-ibm-trackpoint {
    sensitivity = -0.45
}
device:tpps/2-ibm-trackpoint {
    sensitivity = -0.45
}

plugin = /home/jakub/.local/src/hyprfocus/hyprfocus.so
plugin {
  hyprfocus {
    enabled = yes

    keyboard_focus_animation = flash
    mouse_focus_animation = nothing

    bezier = bezIn, 0.5,0.0,1.0,0.5
    bezier = bezOut, 0.0,0.5,0.5,1.0

    flash {
      flash_opacity = 0.95

      in_bezier = bezIn
      in_speed = 0.5

      out_bezier = bezOut
      out_speed = 3
    }
  }
}

windowrulev2 = workspace 2,      class:^(Alacritty.*)$,title:^((?!cli_file_explorer).)*$
windowrule = workspace 3,        mpv
windowrule = workspace 4,        anki
windowrule = workspace 6,        title:cli_mail_client
windowrule = workspace 7 silent, discord
windowrule = workspace 7,        title:_crx_ophjlpahpchlmihnnnihgmmeilfjmjjc # LINE
windowrule = tile,               title:_crx_ophjlpahpchlmihnnnihgmmeilfjmjjc # LINE
windowrule = workspace 8,        title:cli_stocks_app
windowrule = workspace 8,        title:cli_crypto_app
windowrule = workspace 9,        easyeffects
windowrule = workspace 9,        KeePassXC

windowrulev2 = noanim, class:^(ueberzugpp.*)$
windowrulev2 = noshadow, class:^(ueberzugpp.*)$
windowrulev2 = nomaxsize, class:^(ueberzugpp.*)$
windowrulev2 = noblur, class:^(ueberzugpp.*)$
windowrulev2 = nofocus, class:^(ueberzugpp.*)$

windowrulev2 = noshadow, fullscreen:1
windowrulev2 = opacity 0.0 override 0.0 override,class:^(xwaylandvideobridge)$
windowrulev2 = noanim,class:^(xwaylandvideobridge)$
windowrulev2 = nofocus,class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus,class:^(xwaylandvideobridge)$

$MODKEY = SUPER

bind = $MODKEY,       grave,      execr, daemonable-terminal-instance --title cli_weather_app --command $CLI_WEATHER_APP
bind = $MODKEY SHIFT, grave,      execr, mute-mpd

bind = $MODKEY,       j,      layoutmsg, cyclenext
bind = $MODKEY SHIFT,       j,      layoutmsg, swapnext
bind = $MODKEY,       k,      layoutmsg, cycleprev
bind = $MODKEY SHIFT,       k,      layoutmsg, swapprev

bind = $MODKEY,       a,      layoutmsg, addmaster
bind = $MODKEY SHIFT, a,      layoutmsg, removemaster

bind = $MODKEY,       h,      splitratio, -0.04
bind = $MODKEY SHIFT, h,      splitratio, -0.08
bind = $MODKEY,       l,      splitratio, +0.04
bind = $MODKEY SHIFT, l,      splitratio, +0.08

bind = $MODKEY,       q,      killactive
bind = $MODKEY SHIFT, q,      execr, rofi-killall

bind = $MODKEY,       comma,  focusmonitor, left
bind = $MODKEY,       period, focusmonitor, right
bind = $MODKEY SHIFT, comma,  movewindow, mon:left
bind = $MODKEY SHIFT, period, movewindow, mon:right

binde = $MODKEY, minus,  execr, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
binde = $MODKEY SHIFT, minus,  execr, wpctl set-volume @DEFAULT_AUDIO_SINK@ 15%-
binde = $MODKEY, equal,  execr, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
binde = $MODKEY SHIFT, equal,  execr, wpctl set-volume @DEFAULT_AUDIO_SINK@ 15%+

bind = $MODKEY, backspace,  execr, rofi-power-menu-hyprland
bind = $MODKEY SHIFT, backspace,  execr, systemctl suspend -i

bind = $MODKEY,       Return, execr, daemonable-terminal-instance
bind = $MODKEY SHIFT, Return, execr, daemonable-terminal-instance --command $EDITOR

bind = $MODKEY,       w,      execr, $BROWSER
bind = $MODKEY SHIFT, w,      execr, $BACKUP_BROWSER

bind = $MODKEY,       t,      layoutmsg, orientationleft
bind = $MODKEY SHIFT, t,      layoutmsg, orientationright

bind = $MODKEY,       y,      layoutmsg, orientationtop
bind = $MODKEY SHIFT, y,      layoutmsg, orientationbottom

bind = $MODKEY,       u,      layoutmsg, orientationcenter
# TODO: find a bind
# bind = $MODKEY SHIFT, u,      layoutmsg,

bind = $MODKEY,       i,      execr, light -A 10; ddcutil --display 1 setvcp 10 + 15
bind = $MODKEY SHIFT, i,      execr, light -U 10; ddcutil --display 1 setvcp 10 - 15

bind = $MODKEY,       e,      execr, daemonable-terminal-instance --title cli_mail_client --command $CLI_MAIL_CLIENT; rmdir ~/.abook 2>/dev/null; recheck-mail
bind = $MODKEY SHIFT, e,      execr, recheck-mail

bind = $MODKEY,       o,      execr, daemonable-terminal-instance --title cli_file_explorer --command $CLI_FILE_EXPLORER
bind = $MODKEY SHIFT, o,      execr, daemonable-terminal-instance --title cli_system_monitor --command $CLI_SYSTEM_MONITOR

bind = $MODKEY,       p,      execr, mpc-front toggle
bind = $MODKEY SHIFT, p,      execr, playerctl-front play-pause

bind = $MODKEY,       bracketleft,      execr, mpc-front seek -10
bind = $MODKEY SHIFT, bracketleft,      execr, mpc-front seek -60

bind = $MODKEY,       bracketright,      execr, mpc-front seek +10
bind = $MODKEY SHIFT, bracketright,      execr, mpc-front seek +60

bind = $MODKEY,       backslash,      execr, dunstctl close
bind = $MODKEY SHIFT, backslash,      execr, dunstctl history-pop

bind = $MODKEY,       slash,      execr, rofi-website-bookmarks
bind = $MODKEY SHIFT, slash,      execr, rofi-websearch

bind = $MODKEY,       s,      execr, rofi-screenshot
bind = $MODKEY SHIFT, s,      execr, grim -g "$(slurp)" - | wl-copy

bind = $MODKEY,       r,      execr, rofi -show combi -modes combi -combi-modes "window,drun,run"
bind = $MODKEY SHIFT, r,      execr, rofi -modi emoji -show emoji

bind = $MODKEY,       d,      execr, layout-builtin-only
bind = $MODKEY SHIFT, d,      execr, layout-external-only

bind = $MODKEY,       f,      fullscreen,
bind = $MODKEY SHIFT, f,      fakefullscreen,

bind = $MODKEY,       apostrophe,      exec, cliphist list | rofi -dmenu -p "Clipboard history" | cliphist decode | wl-copy
# TODO: find bind
# bind = $MODKEY SHIFT, apostrophe,    exec, cliphist list | rofi -dmenu -p "Cliphist" | cliphist decode | wl-copy

bind = $MODKEY,       z,      execr, mpc-front prev
bind = $MODKEY SHIFT, z,      execr, playerctl-front previous
bind = $MODKEY,       x,      execr, mpc-front next
bind = $MODKEY SHIFT, x,      execr, playerctl-front next

bind = $MODKEY, c,      execr, rofi-calc
bind = $MODKEY SHIFT,       c,execr, daemonable-terminal-instance --title cli_network_manager --command $CLI_NETWORK_MANAGER

bind = $MODKEY,       b,      execr, rofi-bluetooth
bind = $MODKEY SHIFT, b,      execr, rofi-layout

bind = $MODKEY,       n,      execr, daemonable-terminal-instance --command $EDITOR -c VimwikiIndex
bind = $MODKEY SHIFT, n,      execr, daemonable-terminal-instance --command $EDITOR $VIMWIKI_DIR/Scratchpad.md

bind = $MODKEY,       m,      execr, daemonable-terminal-instance --title cli_music_player --command $CLI_MUSIC_PLAYER
bind = $MODKEY SHIFT, m,      execr, daemonable-terminal-instance --title cli_sound_manager --command $CLI_SOUND_MANAGER

bind = $MODKEY,       f1,      execr, daemonable-terminal-instance --title cli_stocks_app --command $CLI_STOCKS_APP
bind = $MODKEY SHIFT, f1,      execr, daemonable-terminal-instance --title cli_crypto_app --command $CLI_CRYPTO_APP
bind = $MODKEY,       f2,      execr, daemonable-terminal-instance --title cli_torrents_manager --command $CLI_TORRENTS_MANAGER -X
bind = $MODKEY SHIFT, f2,      execr, daemonable-terminal-instance --title cli_network_traffic --command $CLI_NETWORK_TRAFFIC
bind = $MODKEY,       f3,      execr, mute-audio
bind = $MODKEY SHIFT, f3,      execr, mute-microphone

bind = $MODKEY,       f9,      execr, daemonable-terminal-instance --command abook -C $XDG_CONFIG_HOME/abook/abookrc --datafile $XDG_CONFIG_HOME/abook/addressbook
bind = $MODKEY,       f10,     execr, killall wshowkeys || wshowkeys &
bind = $MODKEY,       f11,     execr, webcam-preview
bind = $MODKEY,       f12,     execr, $XDG_CONFIG_HOME/hypr/scripts/gamemode.sh

bind = $MODKEY,       space,   layoutmsg, swapwithmaster
bind = $MODKEY SHIFT, space,   togglefloating,

bind = $MODKEY,       tab,     layoutmsg, focusmaster
bind = $MODKEY SHIFT, tab,     pin,

bind = $MODKEY,       v,       layoutmsg, focusmaster master
bind = $MODKEY SHIFT, v,       layoutmsg, swapwithmaster

bind = ,              print,     execr, grim ~/Pictures/Screenshots/pic-full-$(date '+%y%m%d-%H%M-%S').png
# TODO: refactor to wl-recorder
# bind = $MODKEY,       print,   execr, rofi-record
# bind = $MODKEY SHIFT, print,   execr, rofi-record kill

# Switch workspaces with MODKEY + [0-9]
bind = $MODKEY,       1,      workspace, 1
bind = $MODKEY,       2,      workspace, 2
bind = $MODKEY,       3,      workspace, 3
bind = $MODKEY,       4,      workspace, 4
bind = $MODKEY,       5,      workspace, 5
bind = $MODKEY,       6,      workspace, 6
bind = $MODKEY,       7,      workspace, 7
bind = $MODKEY,       8,      workspace, 8
bind = $MODKEY,       9,      workspace, 9

# Move active window to a workspace with MODKEY + SHIFT + [0-9]
bind = $MODKEY SHIFT, 1,      movetoworkspace, 1
bind = $MODKEY SHIFT, 2,      movetoworkspace, 2
bind = $MODKEY SHIFT, 3,      movetoworkspace, 3
bind = $MODKEY SHIFT, 4,      movetoworkspace, 4
bind = $MODKEY SHIFT, 5,      movetoworkspace, 5
bind = $MODKEY SHIFT, 6,      movetoworkspace, 6
bind = $MODKEY SHIFT, 7,      movetoworkspace, 7
bind = $MODKEY SHIFT, 8,      movetoworkspace, 8
bind = $MODKEY SHIFT, 9,      movetoworkspace, 9

bind = $MODKEY,             g,       workspace, e-1
bind = $MODKEY SHIFT,       g,       movetoworkspace, e-1
bind = $MODKEY,             semicolon,       workspace, e+1
bind = $MODKEY SHIFT,       semicolon,       movetoworkspace, e+1

# Move/resize windows with MODKEY + LMB/RMB and dragging
bindm = $MODKEY,      mouse:272,      movewindow
bindm = $MODKEY,      mouse:273,      resizewindow

bind = , xf86audiomicmute, execr, mute-microphone
bind = , xf86audiomute, execr, mute-audio
binde = , xf86audioraisevolume, execr, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
binde = , xf86audiolowervolume, execr, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bind = , xf86audioprev,		execr,	mpc-or-playerctl prev
bind = , xf86audionext,		execr, mpc-or-playerctl next
bind = , xf86audiopause,	execr,	mpc-or-playerctl pause
bind = , xf86audioplay,		execr,	mpc-or-playerctl play
bind = , xf86audiostop,		execr,	mpc-or-playerctl stop
bind = , xf86poweroff,		execr,		  rofi-power-menu
bind = , xf86calculator,		execr,		rofi-calc
bind = , xf86sleep,		execr, sudo -A zzz	
bind = , xf86mail,		execr,		daemonable-terminal-instance --title cli_mail_client --command $CLI_MAIL_CLIENT; rmdir ~/.abook; mw -Y
bind = , xf86mycomputer,		execr,		daemonable-terminal-instance --title cli_file_explorer --command $CLI_FILE_EXPLORER
bind = , xf86monbrightnessup,	execr,		light -A 10; ddcutil --display 1 setvcp 10 + 15
bind = , xf86monbrightnessdown,	execr,		light -U 10; ddcutil --display 1 setvcp 10 - 15

# TODO: maybe execute some powerplan mode, I have this key
# bind = , xf86battery,		execr, 

# TODO: bind these
# bind = , xf86touchpadtoggle,	execr,	(synclient | grep 'TouchpadOff.*1' && synclient TouchpadOff=0) || synclient TouchpadOff=1
# bind = , xf86touchpadoff,	execr, synclient TouchpadOff=1	
# bind = , xf86touchpadon,		execr,	synclient TouchpadOff=0	

exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
