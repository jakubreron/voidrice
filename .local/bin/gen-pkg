#!/bin/sh

file="${1:-pkglist.txt}"
excluded_packages="${2:-$EXCLUDED_PACKAGES}"
search="${3}"

if command -v paru &> /dev/null; then
  manager=paru
elif command -v yay &> /dev/null; then
  manager=yay
else
  manager=pacman
fi

$manager -Qqe | grep "$search" | sed -r "s/\b($excluded_packages)//g" > $file
