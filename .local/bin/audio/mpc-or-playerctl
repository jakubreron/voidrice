#!/usr/bin/env bash

mpc_state=$(mpc status -f %state%)
playerctl_state=$(playerctl status)
mpc_command=$1

if [[ "$mpc_command" =~ "toggle" ]]; then
  playerctl_command_equivalent="play-pause"
elif [[ "$mpc_command" =~ "prev" ]]; then
  playerctl_command_equivalent="previous"
else
  playerctl_command_equivalent="$mpc_command"
fi

if [[ "$mpc_state" =~ "playing" ]] || [[ $(cat "$LAST_USED_AUDIO_STATE_DAEMON_FILE") =~ "mpc" ]]; then
  mpc-front "$mpc_command"
fi

if [[ "$playerctl_state" =~ "Playing" ]] || [[ $(cat "$LAST_USED_AUDIO_STATE_DAEMON_FILE") =~ "playerctl" ]]; then
  playerctl-front "$playerctl_command_equivalent"
fi
