#!/bin/sh

replace_stow() {
  command="stow --adopt --target=$HOME --dir=$DOTFILES_DIR"

  [ -f "$DOTFILES_DIR/voidrice" ] && $command voidrice
  [ -f "$DOTFILES_DIR/universal" ] && $command universal

  if [[ $OSTYPE == 'darwin'* ]]; then
    [ -f "$DOTFILES_DIR/macos" ] && $command macos
  fi
}

replace_firefox_symlinks() {
  path="$DOTFILES_DIR/voidrice/.config/firefox/larbs.js"

  if [[ -f "$path" ]]; then
    if [[ $OSTYPE == 'linux'* ]]; then
      ln -sf "$path" ~/.mozilla/firefox/*dev-edition-*/user-overrides.js
    else
      ln -sf "$path" ~/Library/Application\ Support/Firefox/Profiles/*.default-*/user-overrides.js
    fi
  fi

}

replace_stow
replace_firefox_symlinks
