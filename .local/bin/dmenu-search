#!/bin/sh

# Gives a dmenu prompt to search DuckDuckGo.
# Without input, will open DuckDuckGo.com.
# Anything else, it search it.

LAUNCER="dmenu -l 5 -i -p "
[ -z "${DISPLAY}" ] && LAUNCER="fzf --prompt "

localBROWSER="$BROWSER "
[ -n "$*" ] && localBROWSER="$*"
[ -z "${DISPLAY}" ] && localBROWSER="xdg-open "

if [ -f ~/.config/bookmarks ]; then
	choice=$( (echo "❔" && cat ~/.config/bookmarks) | $LAUNCER"Search:") || exit 1
else
	choice=$(echo "❔" | $LAUNCER -i -p "Search Google:") || exit 1
fi

case "$choice" in
*❔*)
	$localBROWSER"https://google.com"
	exit
	;;
http*)
	$localBROWSER"$(echo $choice | awk '{print $1}')"
	exit
	;;
*) $localBROWSER"https://google.com/search?q=$choice"
	exit
	;;
esac
#vim:ft=sh
